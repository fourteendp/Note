---
title: 访问者模式 (Visitor)
uid: 20240123112807516
aliases: []
categories: []
tags:
  - 计算机/设计模式/GoF设计模式/行为型模式
archive: false
draft: false
todo: false
createTime: 2023-05-07 22:01:31
updateTime: 2024-08-02 13:59:18
---

- 定义：封装一些作用于某种数据结构中的各元素的操作，它可以在不改变数据结构的前提下定义作用于这些元素
  的新的操作
- 解释：访问者模式是一种对象行为型模式，其主要优点如下：
  - 访问者模式使得增加新的操作变得容易，因为增加新的操作就意味着增加一个新的访问者，访问者模式将有关
    的行为集中到一个访问者对象中，其改变不会影响系统数据结构，符合 " 开闭原则 "
  - 访问者模式可以实现有关操作之间的分离，从而使得每个操作集中到一个访问者对象中，而不是分散在一个个
    的元素类中
  - 访问者模式使得增加新的数据结构变得容易，如增加一个新的元素类，无须修改原有系统，符合 " 开闭原则
    "
- 优点：符合单一职责原则；优秀的扩展性；灵活性
- 缺点：具体元素对访问者公布细节，违反了迪米特原则；具体元素变更比较困难；违反了依赖倒置原则，依赖了
  具体类，没有依赖抽象
- 适用场景：对象结构中对象对应的类很少改变，但经常需要在此对象结构上定义新的操作；需要对一个对象结构
  中的对象进行很多不同且不相关的操作，而需要避免让这些操作 " 污染 " 这些对象的类；对象结构中的对象需
  要提供多种不同的并且不相关的操作，而且需要避免让这些操作 " 污染 " 这些对象的类；需要定义对象结构的
  高层操作，而又不想让这些操作污染这些对象的类
- 模式结构：
  - 抽象访问者（Visitor）：为该对象结构中具体元素角色声明一个访问操作接口
  - 具体访问者（ConcreteVisitor）：实现抽象访问者所声明的接口，也就是访问者访问到一个具体元素后所作
    的具体操作
  - 抽象元素（Element）：定义一个接受访问操作，它以一个抽象访问者作为参数
  - 具体元素（ConcreteElement）：实现抽象元素所规定的接受访问操作
  - 对象结构（ObjectStructure）：能枚举它的元素，可以提供一个高层的接口以允许该访问者访问它的元素
  - 客户端（Client）：通过对象结构中的元素提供的高层接口来使用访问者模式
