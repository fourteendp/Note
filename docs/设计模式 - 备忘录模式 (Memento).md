---
title: 设计模式 - 备忘录模式 (Memento)
uid: 20240123112807336
aliases: []
categories:
  - 设计模式/GoF设计模式/行为型模式
tags:
  - 计算机/设计模式/GoF设计模式/行为型模式
archive: false
draft: false
todo: false
createTime: 2023-05-07 22:01:31
updateTime: 2024-09-05 08:53:06
---

- 定义：在不破坏封装性的前提下，捕获一个对象的内部状态，并在该对象之外保存这个状态，这样以后就可将该
  对象恢复到原先保存的状态
- 解释：备忘录模式是一种对象行为型模式，其主要优点如下：
  - 备忘录模式简化了客户类，客户不需要知道与备忘录类的内部细节
  - 备忘录模式将发起人对象的状态存储到了备忘录对象中，从而简化了发起人类
  - 备忘录模式实现了对信息的封装，一个备忘录对象是一种原发器对象状态的表示，不会被其他代码所改动
  - 备忘录模式简化了原发器的设计，原发器不再需要管理备忘录的生命周期
- 优点：为用户提供一种可以恢复状态的机制，可以使用户能够比较方便的回到某个历史的状态，实现撤销操作
- 缺点：资源消耗过大，如果需要保存的原发器类的成员变量太多，将消耗很大的内存资源
- 适用场景：保存和恢复数据相关的业务场景；后悔药功能；打游戏时的存档功能
- 模式结构：
  - 发起人（Originator）：创建一个含有当前的内部状态的备忘录对象，使用备忘录对象存储其内部状态
  - 备忘录（Memento）：负责存储发起人对象的内部状态，在需要的时候提供这些内部状态给发起人对象
  - 管理者（Caretaker）：负责保存备忘录对象，但是不能对备忘录对象的内容进行操作或检查
  - 客户类（Client）：创建一个备忘录对象，将发起人对象的内部状态存储起来；从备忘录对象中恢复发起人对
    象的内部状态
