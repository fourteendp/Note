---
title: 解释器模式 (Interpreter)
uid: 20240123112807460
aliases: []
categories: []
tags:
  - 计算机/设计模式/GoF设计模式/行为型模式
archive: false
draft: false
todo: false
createTime: 2023-05-07 22:01:31
updateTime: 2024-08-02 13:59:18
---

## 解释器模式 (Interpreter)

- 定义：给定一个语言，定义它的文法的一种表示，并定义一个解释器，这个解释器使用该表示来解释语言中的句
  子
- 解释器模式是一种类行为型模式，其主要优点如下：
  - 易于改变和扩展文法：由于在解释器模式中使用类来表示文法规则，因此可以使用继承等机制来改变或扩展文
    法
  - 每一条文法规则都可以表示为一个类，因此可以方便地实现一个简单的语言
  - 实现文法较为容易：在抽象语法树中的每一个表达式节点类都是相似的，所以实现其文法较为容易
- 优点：扩展性好，灵活；增加了新的解释表达式的方式；易于实现简单文法
- 缺点：可利用场景少；对于复杂的文法比较难维护；解释器模式会引起类膨胀；解释器模式采用递归调用方法
- 适用场景：可以将一个需要解释执行的语言中的句子表示为一个抽象语法树；一些重复出现的问题可以用一种简
  单的语言来进行表达；一个简单语法需要解释的场景
- 模式结构：
  - 抽象表达式（Expression）：声明一个所有的具体表达式角色都需要实现的抽象接口，这个接口主要是一个
    interpret() 方法，称为解释操作
  - 终结符表达式（TerminalExpression）：实现与文法中的终结符相关联的解释操作，文法中每一个终结符都有
    一个具体终结表达式与之相对应，实现抽象表达式中所要求的接口，主要是一个 interpret() 方法，文法中
    的每一个终结符都有一个具体终结表达式与之相对应
  - 非终结符表达式（NonterminalExpression）：文法中的非终结符对应的解释器，为文法中的非终结符实现解
    释操作，文法中的每一条规则都需要一个非终结符表达式
  - 环境类（Context）：包含解释器之外的一些全局信息，一般是 HashMap
  - 客户类（Client）：构建抽象语法树，解释表达式
