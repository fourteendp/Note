---
title: 原型模式 (Prototype)
uid: 20240123112807316
aliases: []
categories: []
tags:
  - 计算机/设计模式/GoF设计模式/创建型模式
archive: false
draft: false
todo: false
createTime: 2023-05-07 22:01:31
updateTime: 2024-08-02 13:59:24
---

- 定义：用原型实例指定创建对象的种类，并且通过拷贝这些原型创建新的对象
- 解释：原型模式是一种对象创建型模式，其用原型实例指定创建对象的种类，并且通过拷贝这些原型创建新的对
  象
- 优点：性能提高；逃避构造函数的约束
- 缺点：需要为每一个类配备一个克隆方法，而且该克隆方法位于一个类的内部，当对已有类进行改造时，需要修
  改代码，违背了开闭原则；当实现深克隆时需要编写较为复杂的代码，而且当对象之间存在多重嵌套引用时，为
  了实现深克隆，每一层对象对应的类都必须支持深克隆，实现起来会比较麻烦；深克隆、浅克隆要运用得当
- 适用场景：类初始化需要消化非常多的资源，这个资源包括数据、硬件资源等；通过 new 产生一个对象需要非
  常繁琐的数据准备或访问权限，则可以使用原型模式；一个对象多个修改者的场景，例如，一个对象需要提供给
  其他对象访问，而且各个调用者可能都需要修改其值时，可以考虑使用原型模式拷贝多个对象供调用者使用，即
  保护性拷贝
- 模式结构：
  - 抽象原型类（Prototype）：规定了具体原型对象必须实现的接口
  - 具体原型类（Concrete Prototype）：实现抽象原型类的 clone() 方法，它是可被复制的对象
  - 访问类（Client）：访问原型接口来复制原型对象
  - 注：原型模式的核心是克隆，而克隆分为浅克隆和深克隆，浅克隆只是将对象的属性值复制一份，而引用类型
    的属性值仍然指向原来的对象，深克隆将对象的属性值和引用类型的属性值都复制一份
