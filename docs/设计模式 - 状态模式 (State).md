---
title: 设计模式 - 状态模式 (State)
uid: 20240123112807440
aliases: []
categories: []
tags:
  - 计算机/设计模式/GoF设计模式/行为型模式
archive: false
draft: false
todo: false
createTime: 2023-05-07 22:01:31
updateTime: 2024-09-12 08:13:14
---

- 定义：允许一个对象在其内部状态改变时改变它的行为，对象看起来好像修改了它的类
- 解释：状态模式是一种对象行为型模式，其主要优点如下。状态模式的结构清晰，状态和环境之间的关系明确，
  状态模式是一种对象行为型模式，其主要优点如下。状态模式的结构清晰，状态和环境之间的关系明确，状态模
  式将与特定状态相关的行为局部化，并且将不同状态的行为分割开来。通过定义新的子类很容易增加新的状态和
  转换。允许状态转换逻辑与状态对象合成一体，而不是提供一个巨大的条件分支语句。可以让多个环境对象共享
  一个状态对象，从而减少系统中对象的个数
- 优点：封装了转换规则；枚举可能的状态，在枚举状态之前需要确定状态种类；将所有与某个状态有关的行为都
  放入一个类中，只需要改变对象所属的类即可改变对象的状态，而不是修改对象的状态
- 缺点：状态模式的使用必然会增加系统类和对象的个数；状态模式的结构与实现都较为复杂，如果使用不当会导
  致程序结构和代码的混乱
- 适用场景：一个对象的行为取决于它的状态，并且它必须在运行时刻根据状态改变它的行为；代码中包含大量与
  对象状态有关的条件语句；对象的行为依赖于它的状态，而且它必须在运行时刻根据状态改变它的行为；一个操
  作中含有庞大的多分支语句，且这些分支依赖于该对象的状态
- 模式结构：
  - 抽象状态（State）：定义一个接口以封装与 Context 的一个特定状态相关的行为
  - 具体状态（Concrete State）：每一个具体状态类都实现了抽象状态定义的接口
  - 环境类（Context）：定义客户感兴趣的接口，维护一个 ConcreteState 子类的实例，这个实例定义当前状态
  - 客户类（Client）：创建一个 ConcreteState 对象，以便让它记录当前状态
